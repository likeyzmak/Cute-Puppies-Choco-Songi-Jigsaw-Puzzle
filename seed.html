<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Leaderboard Seed Tool</title>
    <style>
        body { font-family: sans-serif; line-height: 1.6; padding: 20px; }
        #log { border: 1px solid #ccc; padding: 10px; height: 300px; overflow-y: scroll; background-color: #f4f4f4; }
    </style>
</head>
<body>
    <h1>리더보드 점수 등록 중...</h1>
    <p>이 페이지를 열어두세요. 50개의 가짜 점수를 서버로 전송하고 있습니다.</p>
    <p>아래 창에서 진행 상황을 확인할 수 있습니다.</p>
    <div id="log"></div>

    <script>
        (async function seedLeaderboard() {
            const logDiv = document.getElementById('log');
            const log = (message) => {
                console.log(message);
                logDiv.innerHTML += message + '<br>';
                logDiv.scrollTop = logDiv.scrollHeight;
            };

            log("리더보드에 50개의 가짜 점수 등록을 시작합니다...");
            const API_ENDPOINT = './api/leaderboard';
            const nicknames = ["Choco", "Songi", "PuppyLover", "PuzzleMaster", "Gemini", "Bard", "NetlifyFan", "PlayerOne", "ProGamer"];
            const difficulties = ["4x4", "6x6", "8x8", "12x12"];
            const emotions = ["🌟👏 Great Job!", "😐🤔 So-so"];

            for (let i = 0; i < 50; i++) {
                const score = Math.floor(Math.random() * 95) + 5;
                const newScore = {
                    nickname: nicknames[Math.floor(Math.random() * nicknames.length)],
                    score: score,
                    difficulty: difficulties[Math.floor(Math.random() * difficulties.length)],
                    time: "01:23",
                    date: new Date().toLocaleDateString(),
                    emotion: emotions[Math.floor(Math.random() * emotions.length)],
                    timestamp: Date.now() + i
                };

                try {
                    const response = await fetch(API_ENDPOINT, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(newScore)
                    });
                    if (!response.ok) {
                        const errorText = await response.text();
                        log(`오류 발생 #${i + 1}: ${errorText}`);
                    } else {
                        log(`성공적으로 점수를 등록했습니다 #${i + 1}`);
                    }
                } catch (error) {
                    log(`점수 등록 중 네트워크 에러 발생 #${i + 1}: ${error}`);
                }
                await new Promise(res => setTimeout(res, 100));
            }
            log("<h2>작업 완료!</h2><p>50개의 점수가 모두 등록되었습니다. 이제 이 페이지를 닫고, 원래 게임으로 돌아가 리더보드를 확인해보세요.</p><p><strong>중요: 테스트가 끝났으니, 이제 GitHub 저장소에서 seed.html 파일을 삭제하는 것을 잊지 마세요.</strong></p>");
        })();
    </script>
</body>
</html>
